#labels Featured
Release notes for new versions, in reverse-chronological order (most recent first)

=Release notes for April 6 2008, js2-20080406.el:=

New features:

  * we now highlight assignment to undeclared variables in orange.  This can be disabled with the new `js2-highlight-external-variables` Custom variable.  The face used is `js2-external-variable-face`.

  * assigning a function to a variable or property now colors that property with `js2-function-name-face` to indicate that it's a function name.

  * a new Custom variable, `js2-missing-semi-one-line-override`, can be set to `t` to suppress missing-semicolon warnings in one-statement function bodies where the braces are on the same line, e.g. `function identity(x) {return x}`

  * added in missing support for the e4x statement: `default xml namespace = <expr>`

  * added support for experimental Rhino syntax, `new expr [ ( arglist ) ] [ initializer ]`, e.g. `new Object() {a: 1, b: 2}`, which uses an object-literal following a `new` expression to add extra properties to the constructed object.  This support is off by default, and can be enabled with new Custom variable `js2-allow-rhino-new-expr-initializer`

  * invalid \uxxxx unicode code points (e.g. \u980b) in strings are now underlined as warnings

New syntax errors reported:

  * `continue` targeting a label that doesn't label a loop
  * `TypeError` when a generator function returns a value
  * `return` or `yield` outside a function
  * trying to ++ or -- an invalid operand

New strict-mode warnings reported:

  * statement with no side effects
  * using `return` and `return -value-` in same function.  Can be disabled with `js2-strict-inconsistent-return-warning` variable.

Bug fixes:

  * no longer pukes when strings include unicode escapes, e.g. `\u200e`
  * bumped up `max-specpdl-size` to avoid error when parsing deeply nested functions
  * fixed incorrect auto-indentation of auto-matched close-curly in top-level constructs
  * bind Enter key in a way that also works in terminal sessions
  * errors now take precedence over warnings in the same location
  * let statements now give missing-semicolon warnings (like var/const)

API fixes:

  * fixed bug where parser was generating for-in loops instead of for-loops and vice-versa
  * now differentiate between empty expressions and empty statements
  * fixed ast generation for empty {} js expressions in e4x xml literals
  * fixed position, length and operator-position for xml dot-query ast nodes


=Release notes for April 3 2008, js2-20080403.el:=

Features:

  * improved imenu support a bit:  it now parses inside object literals assigned to top-level variables, which catches a few dozen `prototype.js` functions.  Still need to handle foo.bar.baz = {...} situations.

  * `js2-next-error` can now move forward or backward N errors with a numeric prefix arg

  * new command, `js2-mark-defun` (analogous to `mark-defun`) for marking functions and other top-level forms.  Can be invoked repeatedly to extend the selection.

  * new command, `js2-narrow-to-defun` for making text outside current function invisible.

Bug fixes:

  * eliminated annoying flashing when re-fontifying (don't clear old colors until last possible instant)

  * fixed bug in inserting close-bracket (was inserting close-paren)

  * reduced typing lag in big files by checking for user input more often while parsing

  * `M-x rgrep` and other functions that use `find-tag-default` now find a much more reasonable tag candidate.

  * removed an accidental runtime dependency on the CL package

Usability/behavior changes:

  * added asterisk to `js2-electric-keys` so typing it in a block comment will auto-indent the line.  For now, typing an asterisk auto-indents any line - will fix later.  If you hate it you can remove it from your `js2-electric-keys' list.

  * made improvements to filling block comments, particularly if they're indented.  Still not perfect - need to write my own fill function eventually, since `c-fill-paragraph` is getting confused.  It works a little better in Emacs 22 than in 21.

  * don't insert matched quotes (in mirror mode) if next char is non-whitespace.

  * turned off `js2-mode-indent-ignore-first-tab` by default - the behavior still needs some fine-tuning

  * mode no longer binds C-x ' as `js2-next-error`; it binds C-c C-' instead.  In Emacs 22+, you can use the `next-error` command as well.

  * mode no longer binds C-c C-h (hide element), which interferes with showing a prefix keymap's bindings using C-h.

  * `js2-node-at-point` is no longer interactive.

=Release notes for April 2 2008, js2-20080402a.el:=

  * fixed bug where missing-semicolon warning was being issued after you typed a semicolon

  * when possible, ignore TAB key if it's the first time it's used on the current line and we're already indented to one of the computed alternatives.  This is configurable with (and the reasoning is documented in) the new custom variable `js2-mode-indent-ignore-first-tab'

  * changed the behavior of Undo when indenting.  In a previous release, per a user request, I'd made it so that bounce-indent doesn't record Undo information.  I've changed it back to record Undo info whenever the indentation changes.  You can disable recording undo around indents with the new custom variable `js2-mode-indent-inhibit-undo'

  * changed the default keybindings of js2-show/hide-element, js2-mode-show-all, and js2-mode-toggle-hide-functions/comments commands to be of the form C-c C-<letter>, instead of C-c <letter>, to be compliant with Emacs policy.  Thanks to jjfoe for the clarification.

=Release notes for April 1 2008, js2-20080401a.el:=

Defined a missing variable, `emacs22`, required for this mode to load.  Tested more carefully this time!

=Release notes for April 1 2008, js2-20080401.el:=

  * fixed problem where indenting after line with /"/ regexp always indented to column 0.  It's still not perfect, but at least it invokes the bounce-indenter now.
    
  * fixed hitting Enter after /** in already-terminated block comment.  It was trying to terminate the comment again. Now it will only insert the terminator if it's currently a parse error (it assumes the error is an unterminated comment.)
    
  * added yield into the keyword lists (was inadvertently omitted)

  * per user request, made bounce-indent not record undo info

  * added highlighting for simple html start/end tags in jsdoc

  * don't do single-quote-matching inside comments, since typing an apostrophe is the most common case.

=Release notes for March 31 2008, js2-20080331.el:=

  * fixed broken installation instructions

  * added `js2-language-version` custom variable that defaults to 150, for JavaScript 1.5.  If you set it to 160, you get E4X support, and 170 adds let, yield, and array comprehensions.
    
  * added new warning for missing semicolon (auto-insertion)
     * configured via `js2-strict-missing-semi-warning`

  * fixed default indentation for first line of an object literal being passed as the first parameter to a function: most people want this indented from previous line, not from the curly-brace.  Example:
    
{{{
	foo.bar.baz({
          a: 1     // most people want this line indented here
}}}

  * improved the heuristics for deciding whether to insert a close-paren or close-bracket when sitting on one.  It's still not very smart, but it's less annoying than it was.